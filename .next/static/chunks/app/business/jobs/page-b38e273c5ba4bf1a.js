(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6553],{9674:function(e,t,a){Promise.resolve().then(a.bind(a,1998))},1998:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g},dynamic:function(){return y}});var s=a(7437),l=a(2265),r=a(3763),i=a(4667),n=a(4232),c=a(3274),o=a(4817),d=a(8030);let u=(0,d.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),m=(0,d.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var h=a(3231);let x=(0,d.Z)("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);var p=a(7776);let y="force-dynamic",f=(0,i.S)();function g(){let e=function(){let[e,t]=(0,l.useState)(!1);return(0,l.useEffect)(()=>t(!0),[]),e}(),[t,a]=(0,l.useState)([]),[i,d]=(0,l.useState)(!0),[m,h]=(0,l.useState)("active"),[x,y]=(0,l.useState)(null);async function g(e){d(!0);let{data:t,error:s}=await f.from("jobs").select("id, title, description, status, schedule, created_at").eq("client_id",e).not("schedule","is",null).order("created_at",{ascending:!1});s?(console.error("❌ Error cargando jobs:",s),p.A.error("Error al cargar tus servicios")):a(t||[]),d(!1)}(0,l.useEffect)(()=>{!async function(){let{data:e}=await f.auth.getUser();(null==e?void 0:e.user)?(y(e.user),g(e.user.id)):d(!1)}()},[]);let v=t.filter(e=>"active"===m?"open"===e.status||"in_progress"===e.status:"paused"===m?"paused"===e.status:"completed"!==m||"completed"===e.status);return e?(0,s.jsx)(r.E.div,{className:"min-h-screen bg-gradient-to-b from-white via-gray-50 to-gray-100 text-gray-900 pb-24",initial:{opacity:0},animate:{opacity:1},children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-6 pt-10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)(n.Z,{className:"text-emerald-600 w-7 h-7"}),(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-emerald-600",children:"Panel empresarial"})]}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Visualiz\xe1 y gestion\xe1 tus servicios activos, programados y completados."}),(0,s.jsx)("div",{className:"flex gap-3 mb-8 flex-wrap",children:[{key:"active",label:"Activos"},{key:"paused",label:"Pausados"},{key:"completed",label:"Completados"}].map(e=>(0,s.jsx)("button",{onClick:()=>h(e.key),className:"px-5 py-2 rounded-full font-semibold text-sm transition-all ".concat(m===e.key?"bg-emerald-500 text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"),children:e.label},e.key))}),i?(0,s.jsxs)("div",{className:"flex justify-center items-center mt-10 gap-2 text-gray-400",children:[(0,s.jsx)(c.Z,{className:"animate-spin"})," Cargando servicios..."]}):0===v.length?(0,s.jsxs)("div",{className:"text-center text-gray-500 py-20",children:[(0,s.jsx)(o.Z,{className:"mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{children:"No se encontraron servicios en esta categor\xeda."})]}):(0,s.jsx)("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-5",children:v.map((e,t)=>(0,s.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5 hover:shadow-lg transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-800 text-lg line-clamp-1",children:e.title}),(0,s.jsx)(b,{status:e.status})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:e.description}),e.schedule&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mb-3",children:[(0,s.jsx)(u,{className:"inline w-3.5 h-3.5 mr-1 text-emerald-500"}),e.schedule.start_date," → ",e.schedule.end_date]}),(0,s.jsx)(j,{status:e.status}),(0,s.jsx)("button",{className:"w-full mt-4 py-2 rounded-xl font-semibold bg-emerald-500 text-white hover:bg-emerald-600 transition",onClick:()=>(0,p.A)("\uD83E\uDDE9 Ver detalles de ".concat(e.title)),children:"Ver detalle"})]},e.id))})]})}):null}function b(e){let{status:t}=e,a={open:{label:"Pendiente",color:"bg-gray-100 text-gray-700",icon:(0,s.jsx)(m,{size:14})},in_progress:{label:"Activo",color:"bg-emerald-100 text-emerald-700",icon:(0,s.jsx)(h.Z,{size:14})},paused:{label:"Pausado",color:"bg-yellow-100 text-yellow-700",icon:(0,s.jsx)(x,{size:14})},completed:{label:"Completado",color:"bg-blue-100 text-blue-700",icon:(0,s.jsx)(h.Z,{size:14})}},l=a[t]||a.open;return(0,s.jsxs)("span",{className:"text-xs px-2.5 py-1 rounded-full font-medium flex items-center gap-1 ".concat(l.color),children:[l.icon," ",l.label]})}function j(e){let{status:t}=e;return(0,s.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-emerald-500 transition-all duration-700",style:{width:"".concat("open"===t?10:"in_progress"===t?55:"paused"===t?35:100,"%")}})})}},4667:function(e,t,a){"use strict";a.d(t,{S:function(){return r}});var s=a(951);let l=null;function r(){if(l)return l;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("❌ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return l=(0,s.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("✅ Supabase (browser client) inicializado en",e),l}},4232:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3231:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},3274:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},4817:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}},function(e){e.O(0,[951,7776,3642,2971,7023,1744],function(){return e(e.s=9674)}),_N_E=e.O()}]);