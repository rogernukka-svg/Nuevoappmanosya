(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4013],{2683:function(e,t,a){Promise.resolve().then(a.bind(a,9614))},9614:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(7437),r=a(2265),s=a(6463),i=a(4667),o=a(7776),l=a(3274),c=a(1145),u=a(3045);let d=(0,a(8030).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var m=a(3763);let h=(0,i.S)();function x(){let e=(0,s.useRouter)(),[t,a]=(0,r.useState)(!0),[i,x]=(0,r.useState)(null),[f,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{var t;let{data:n}=await h.auth.getSession();if(!(null==n?void 0:null===(t=n.session)||void 0===t?void 0:t.user)){e.replace("/login");return}x(n.session.user.email),a(!1)})()},[e]);let y=async t=>{var n,r;p(t),a(!0);let{data:s}=await h.auth.getSession(),i=null==s?void 0:null===(r=s.session)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.id;if(!i){o.A.error("Sesi\xf3n expirada"),e.replace("/login");return}let{error:l}=await h.from("profiles").update({role:t}).eq("id",i);if(l){o.A.error("Error al guardar rol"),a(!1);return}localStorage.setItem("app_role",t),o.A.success("Modo ".concat("worker"===t?"Trabajador":"Cliente"," activado ✅")),e.push("/".concat(t))},w=async()=>{await h.auth.signOut(),localStorage.removeItem("app_role"),e.replace("/login")};return t?(0,n.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-600",children:[(0,n.jsx)(l.Z,{className:"animate-spin w-6 h-6 mr-2"}),"Cargando..."]}):(0,n.jsxs)("div",{className:"relative min-h-screen flex flex-col items-center justify-center px-6 font-[var(--font-manrope)] text-gray-800 overflow-hidden bg-gradient-to-b from-white via-emerald-50 to-cyan-50",children:[(0,n.jsx)(m.E.div,{className:"absolute top-[25%] left-1/2 w-[320px] h-[320px] rounded-full bg-emerald-400/20 blur-[120px] -translate-x-1/2",animate:{opacity:[.3,.7,.3],scale:[1,1.08,1]},transition:{duration:7,repeat:1/0,ease:"easeInOut"}}),(0,n.jsxs)(m.E.div,{initial:{opacity:0,y:25},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center z-10",children:[(0,n.jsx)(m.E.div,{animate:{y:[0,-6,0]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},className:"text-6xl mb-4",children:"\uD83E\uDD1D"}),(0,n.jsxs)("h1",{className:"text-4xl font-extrabold tracking-tight",children:[(0,n.jsx)("span",{className:"text-[#111827]",children:"Manos"}),(0,n.jsx)("span",{className:"text-emerald-600",children:"YA"})]}),(0,n.jsxs)("p",{className:"mt-4 text-gray-600 leading-relaxed text-[15px] max-w-sm mx-auto",children:["Conect\xe1 con ",(0,n.jsx)("span",{className:"text-emerald-600 font-semibold",children:"ManosYA"})," para pedir o brindar servicios al instante."]})]}),(0,n.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.9,delay:.3},className:"w-full max-w-xs flex flex-col gap-4 mt-10 z-10",children:[(0,n.jsxs)(m.E.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.97},onClick:()=>y("client"),className:"flex items-center justify-center gap-2 py-3 rounded-full font-semibold shadow-md transition-all ".concat("client"===f?"bg-emerald-600 text-white shadow-emerald-400/40":"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white shadow-emerald-300/30"),children:[(0,n.jsx)(c.Z,{className:"w-5 h-5"}),"Soy Cliente"]}),(0,n.jsxs)(m.E.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.97},onClick:()=>y("worker"),className:"flex items-center justify-center gap-2 py-3 rounded-full font-semibold shadow-md transition-all ".concat("worker"===f?"bg-cyan-600 text-white shadow-cyan-400/40":"bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 text-white shadow-cyan-300/30"),children:[(0,n.jsx)(u.Z,{className:"w-5 h-5"}),"Soy Trabajador"]})]}),(0,n.jsxs)("div",{className:"mt-10 text-center z-10",children:[(0,n.jsxs)("button",{onClick:w,className:"flex items-center gap-2 justify-center text-sm text-gray-500 hover:text-red-500 transition",children:[(0,n.jsx)(d,{className:"w-4 h-4"}),"Cerrar sesi\xf3n"]}),(0,n.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Pod\xe9s cambiar tu rol m\xe1s adelante desde tu perfil."})]})]})}},4667:function(e,t,a){"use strict";a.d(t,{S:function(){return s}});var n=a(951);let r=null;function s(){if(r)return r;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("❌ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return r=(0,n.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("✅ Supabase (browser client) inicializado en",e),r}},3274:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(8030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1145:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(8030).Z)("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]])},3045:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});let n=(0,a(8030).Z)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},6463:function(e,t,a){"use strict";var n=a(1169);a.o(n,"useParams")&&a.d(t,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[951,7776,3642,2971,7023,1744],function(){return e(e.s=2683)}),_N_E=e.O()}]);