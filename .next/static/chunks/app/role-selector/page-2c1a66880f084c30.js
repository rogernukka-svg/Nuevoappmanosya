(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4013],{2683:function(e,t,a){Promise.resolve().then(a.bind(a,9149))},9149:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var s=a(7437),n=a(2265),r=a(6463),i=a(4667),l=a(7776),c=a(3274);let o=(0,a(8030).Z)("user-round",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);var u=a(3045),d=a(3763);let m=(0,i.S)();function x(){let e=(0,r.useRouter)(),[t,a]=(0,n.useState)(!0),[i,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{var t;let{data:s,error:n}=await m.auth.getSession();if(n||!(null==s?void 0:null===(t=s.session)||void 0===t?void 0:t.user)){l.A.error("Inici\xe1 sesi\xf3n para continuar"),e.replace("/login");return}x(s.session.user.email),a(!1)})()},[e]);let h=async t=>{a(!0);try{let{data:a}=await m.auth.getSession(),s=null==a?void 0:a.session;if(!(null==s?void 0:s.user)){l.A.error("Sesi\xf3n expirada. Inici\xe1 sesi\xf3n nuevamente."),e.replace("/login");return}let n=s.user.id,{error:r}=await m.from("profiles").update({role:t}).eq("id",n);if(r)throw r;localStorage.setItem("app_role",t),l.A.success("Modo ".concat("worker"===t?"Trabajador":"Cliente"," activado ✅")),setTimeout(()=>{e.replace("/".concat(t))},600)}catch(e){console.error(e),l.A.error("No se pudo guardar tu elecci\xf3n."),a(!1)}};return t?(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-800",children:[(0,s.jsx)(c.Z,{className:"animate-spin w-6 h-6 mr-2"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:"Cargando tu sesi\xf3n..."})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-white via-emerald-50 to-cyan-50 flex flex-col items-center justify-between py-10 px-6",children:[(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[(0,s.jsxs)("h1",{className:"text-2xl font-extrabold text-gray-900",children:["\xa1Hola, ",(0,s.jsx)("span",{className:"text-emerald-600",children:i}),"!"]}),(0,s.jsxs)("p",{className:"text-gray-600 text-base mt-2",children:[(0,s.jsx)("span",{className:"text-emerald-500 font-semibold",children:"ManosYA"})," te conecta al instante \uD83D\uDE80"]})]}),(0,s.jsxs)("div",{className:"w-full max-w-xs flex flex-col gap-5 mt-8",children:[(0,s.jsxs)(d.E.button,{whileTap:{scale:.97},whileHover:{scale:1.03},onClick:()=>h("client"),className:"bg-white border border-emerald-400 rounded-xl py-4 px-5 shadow-sm hover:shadow-md transition-all flex flex-col items-center text-center active:scale-95",children:[(0,s.jsx)(o,{className:"w-8 h-8 text-emerald-500 mb-2"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-emerald-600",children:"Soy Cliente"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 leading-tight",children:"Encontr\xe1 ayuda confiable en minutos."})]}),(0,s.jsxs)(d.E.button,{whileTap:{scale:.97},whileHover:{scale:1.03},onClick:()=>h("worker"),className:"bg-white border border-cyan-400 rounded-xl py-4 px-5 shadow-sm hover:shadow-md transition-all flex flex-col items-center text-center active:scale-95",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-cyan-500 mb-2"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-cyan-600",children:"Soy Trabajador"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1 leading-tight",children:"Ofrec\xe9 tus servicios y crec\xe9 con nosotros."})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center mt-10",children:"Pod\xe9s cambiar tu rol en cualquier momento desde tu perfil."})]})}},4667:function(e,t,a){"use strict";a.d(t,{S:function(){return r}});var s=a(951);let n=null;function r(){if(n)return n;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("❌ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return n=(0,s.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("✅ Supabase (browser client) inicializado en",e),n}},3274:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3045:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(8030).Z)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},6463:function(e,t,a){"use strict";var s=a(1169);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[951,7776,3642,2971,7023,1744],function(){return e(e.s=2683)}),_N_E=e.O()}]);