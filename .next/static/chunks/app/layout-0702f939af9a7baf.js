(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{4800:function(e,t,s){Promise.resolve().then(s.bind(s,6413)),Promise.resolve().then(s.t.bind(s,5541,23)),Promise.resolve().then(s.t.bind(s,6517,23)),Promise.resolve().then(s.t.bind(s,8877,23)),Promise.resolve().then(s.bind(s,7776))},6413:function(e,t,s){"use strict";s.d(t,{default:function(){return m}});var a=s(7437),n=s(2265),r=s(6463),i=s(7138),o=s(7776),l=s(4667);function c(){let e=(0,r.usePathname)(),[t,s]=(0,n.useState)("");return((0,n.useEffect)(()=>{e&&(e.startsWith("/client")?s("— Conectamos clientes y profesionales \uD83D\uDCAA"):e.startsWith("/worker")?s("— Impulsamos tu trabajo en cada pedido ⚙️"):e.startsWith("/admin")?s("— Panel interno de gesti\xf3n y monitoreo \uD83E\uDDE0"):s(""))},[e]),t)?(0,a.jsx)("div",{className:"mt-1 text-emerald-600/80 text-xs font-medium animate-fadeIn",children:t}):null}function u(e){let{children:t}=e,s=(0,r.useRouter)(),u=(0,r.usePathname)(),[d,m]=(0,n.useState)(!1),f=(0,l.S)();if((0,n.useEffect)(()=>{m(!0),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>console.log("✅ Service Worker activo")).catch(e=>console.warn("⚠️ Error SW:",e));let{data:{subscription:e}}=f.auth.onAuthStateChange(async(e,t)=>{"SIGNED_IN"===e&&(null==t?void 0:t.user)&&console.log("✅ Sesi\xf3n activa:",t.user.email),"SIGNED_OUT"===e&&(console.log("\uD83D\uDEAA Sesi\xf3n cerrada → redirigiendo a /login"),s.replace("/login"))});return()=>{e.unsubscribe()}},[s,f]),!d)return null;let h=null==u?void 0:u.startsWith("/worker"),x=null==u?void 0:u.startsWith("/client"),b=null==u?void 0:u.startsWith("/admin"),g=(null==u?void 0:u.startsWith("/login"))||(null==u?void 0:u.startsWith("/register"))||(null==u?void 0:u.startsWith("/role-selector"));return(0,a.jsxs)("div",{suppressHydrationWarning:!0,className:" bg-white text-gray-900 min-h-screen flex flex-col antialiased selection:bg-emerald-100 selection:text-emerald-700 overflow-x-hidden overflow-y-visible relative ",children:[(0,a.jsxs)("div",{className:"pointer-events-none fixed inset-0 -z-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-gray-50 to-gray-100"}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(ellipse_at_30%_20%,rgba(20,184,166,0.08),transparent_70%)]"}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(ellipse_at_70%_40%,rgba(59,130,246,0.05),transparent_70%)]"})]}),!g&&(0,a.jsxs)("header",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white/90 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)(i.default,{href:h?"/worker/onboard":x?"/client":b?"/admin":"/",className:"text-[1.4rem] font-extrabold tracking-tight hover:opacity-90 transition-opacity",children:[(0,a.jsx)("span",{className:"text-gray-900",children:"Manos"}),(0,a.jsx)("span",{className:"text-emerald-600",children:"YA"})]}),h&&(0,a.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Trabajador \uD83E\uDDD1‍\uD83D\uDD27"}),x&&(0,a.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Cliente \uD83C\uDFE1"}),b&&(0,a.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Admin \uD83E\uDDE0"}),!h&&!x&&!b&&(0,a.jsx)("span",{className:"text-xs text-gray-500 tracking-wide",children:"v1.0 Beta"})]}),(0,a.jsx)("main",{className:"flex-1 relative z-10 animate-fadeIn",children:t}),!(null==u?void 0:u.startsWith("/client"))&&!(null==u?void 0:u.startsWith("/worker"))&&(0,a.jsxs)("footer",{className:"bg-gray-50 text-center py-4 border-t border-gray-200 text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," ",(0,a.jsx)("span",{className:"text-emerald-600 font-semibold",children:"ManosYA"})," \xb7 Alto Paran\xe1 \uD83C\uDDF5\uD83C\uDDFE",(0,a.jsx)(c,{}),(0,a.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Tu ayuda al instante ⚡"})]}),(0,a.jsx)(o.Toaster,{position:"bottom-center",richColors:!0,toastOptions:{style:{background:"#fff",color:"#1f2937",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)"}}})]})}function d(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),t(e),r(!0)})},[]);let i=async()=>{if(!e)return;e.prompt();let{outcome:s}=await e.userChoice;console.log("Resultado instalaci\xf3n:",s),t(null),r(!1)};return s?(0,a.jsx)("button",{onClick:i,className:"fixed bottom-20 right-4 bg-[var(--accent)] text-black font-bold px-4 py-2 rounded-xl shadow-lg",children:"\uD83D\uDCF2 Instalar App"}):null}function m(e){let{children:t}=e,s=(0,r.usePathname)(),[i,o]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{o(!0)},[]),!i)return null;let l=s.startsWith("/worker")||s.startsWith("/business");return"/login"===s||"/register"===s||"/role-selector"===s||"/registro"===s?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-900",children:[t,(0,a.jsx)(d,{})]}):l?(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)(d,{})]}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#F9FAFB] text-gray-900",children:[(0,a.jsx)(u,{children:t}),(0,a.jsx)(d,{})]})}},4667:function(e,t,s){"use strict";s.d(t,{S:function(){return r}});var a=s(951);let n=null;function r(){if(n)return n;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("❌ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return n=(0,a.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("✅ Supabase (browser client) inicializado en",e),n}},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(231),n=s.n(a)},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},8877:function(){},5541:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3",variable:"__variable_f367f3"}},6517:function(e){e.exports={style:{fontFamily:"'__Manrope_73ee6c', '__Manrope_Fallback_73ee6c'",fontStyle:"normal"},className:"__className_73ee6c",variable:"__variable_73ee6c"}}},function(e){e.O(0,[1968,404,951,7776,231,2971,7023,1744],function(){return e(e.s=4800)}),_N_E=e.O()}]);