(()=>{var e={};e.id=394,e.ids=[394],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8505:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>c}),s(1471),s(9884),s(2309),s(5866);var a=s(3191),r=s(8716),n=s(7922),i=s.n(n),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["client",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1471)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\client\\page.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,9884)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\client\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2309)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\client\\page.jsx"],m="/client/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/client/page",pathname:"/client",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5196:(e,t,s)=>{Promise.resolve().then(s.bind(s,6053)),Promise.resolve().then(s.bind(s,5999))},8424:(e,t,s)=>{Promise.resolve().then(s.bind(s,118))},407:()=>{},3448:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6053:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var a=s(326),r=s(7577),n=s(5047),i=s(434),l=s(5999),o=s(3170);function c(){(0,n.usePathname)();let[e,t]=(0,r.useState)("");return e?a.jsx("div",{className:"mt-1 text-emerald-600/80 text-xs font-medium animate-fadeIn",children:e}):null}function d({children:e}){(0,n.useRouter)();let t=(0,n.usePathname)(),[s,d]=(0,r.useState)(!1);if((0,o.S)(),!s)return null;let m=t?.startsWith("/worker"),x=t?.startsWith("/client"),u=t?.startsWith("/admin"),h=t?.startsWith("/login")||t?.startsWith("/register")||t?.startsWith("/role-selector");return(0,a.jsxs)("div",{suppressHydrationWarning:!0,className:" bg-white text-gray-900 min-h-screen flex flex-col antialiased selection:bg-emerald-100 selection:text-emerald-700 overflow-x-hidden overflow-y-visible relative ",children:[(0,a.jsxs)("div",{className:"pointer-events-none fixed inset-0 -z-10",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-gray-50 to-gray-100"}),a.jsx("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(ellipse_at_30%_20%,rgba(20,184,166,0.08),transparent_70%)]"}),a.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(ellipse_at_70%_40%,rgba(59,130,246,0.05),transparent_70%)]"})]}),!h&&(0,a.jsxs)("header",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white/90 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)(i.default,{href:m?"/worker/onboard":x?"/client":u?"/admin":"/",className:"text-[1.4rem] font-extrabold tracking-tight hover:opacity-90 transition-opacity",children:[a.jsx("span",{className:"text-gray-900",children:"Manos"}),a.jsx("span",{className:"text-emerald-600",children:"YA"})]}),m&&a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Trabajador \uD83E\uDDD1‍\uD83D\uDD27"}),x&&a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Cliente \uD83C\uDFE1"}),u&&a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Admin \uD83E\uDDE0"}),!m&&!x&&!u&&a.jsx("span",{className:"text-xs text-gray-500 tracking-wide",children:"v1.0 Beta"})]}),a.jsx("main",{className:"flex-1 relative z-10 animate-fadeIn",children:e}),!t?.startsWith("/client")&&!t?.startsWith("/worker")&&(0,a.jsxs)("footer",{className:"bg-gray-50 text-center py-4 border-t border-gray-200 text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," ",a.jsx("span",{className:"text-emerald-600 font-semibold",children:"ManosYA"})," \xb7 Alto Paran\xe1 \uD83C\uDDF5\uD83C\uDDFE",a.jsx(c,{}),a.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Tu ayuda al instante ⚡"})]}),a.jsx(l.Toaster,{position:"bottom-center",richColors:!0,toastOptions:{style:{background:"#fff",color:"#1f2937",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)"}}})]})}function m(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!1),i=async()=>{if(!e)return;e.prompt();let{outcome:s}=await e.userChoice;console.log("Resultado instalaci\xf3n:",s),t(null),n(!1)};return s?a.jsx("button",{onClick:i,className:"fixed bottom-20 right-4 bg-[var(--accent)] text-black font-bold px-4 py-2 rounded-xl shadow-lg",children:"\uD83D\uDCF2 Instalar App"}):null}function x({children:e}){let t=(0,n.usePathname)(),[s,i]=(0,r.useState)(!1);if(!s)return null;let l=t.startsWith("/worker")||t.startsWith("/business");return"/login"===t||"/register"===t||"/role-selector"===t||"/registro"===t?(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-900",children:[e,a.jsx(m,{})]}):l?(0,a.jsxs)(a.Fragment,{children:[e,a.jsx(m,{})]}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#F9FAFB] text-gray-900",children:[a.jsx(d,{children:e}),a.jsx(m,{})]})}},118:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(326),r=s(7577),n=s(5795),i=s(1468),l=s(8307),o=s(7546);let c=(0,s(2881).Z)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var d=s(3734),m=s(434),x=s(5047),u=s(3170),h=s(5999);let p=(0,u.S)();function f(){let e=(0,x.useRouter)(),[t,s]=(0,r.useState)(!1),[u,f]=(0,r.useState)(null),[b,g]=(0,r.useState)(null),[j,y]=(0,r.useState)([]),[v,w]=(0,r.useState)([]),[N,O]=(0,r.useState)(!1),[A,S]=(0,r.useState)(!1);(0,r.useRef)(null);let C=(0,r.useRef)(null);(0,r.useRef)(null);let[E,D]=(0,r.useState)(!1),[R,k]=(0,r.useState)(0),[P,Y]=(0,r.useState)("");async function I(){try{if(!b?.id||!u?.id||!b.worker_id)return;let{data:e}=await p.from("chats").select("id").eq("job_id",b.id).maybeSingle();if(!e?.id)throw Error("Chat no encontrado.");let{data:t}=await p.from("messages").select("*").eq("chat_id",e.id).order("created_at",{ascending:!0});w(t||[]),O(!0),C.current&&p.removeChannel(C.current);let s=p.channel(`chat-${e.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${e.id}`},e=>{let t=e.new;w(e=>[...e,t]),t.sender_id!==u.id&&(0,h.A)(`💬 Nuevo mensaje: ${t.content}`)}).subscribe();C.current=s}catch(e){h.A.error("No se pudo abrir el chat: "+e.message)}}return t?(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center px-6 py-10 text-center bg-gradient-to-b from-white via-gray-50 to-gray-100",children:[(0,a.jsxs)("header",{className:"w-full max-w-4xl flex justify-between items-center mb-8",children:[a.jsx("span",{className:"text-gray-600 text-sm hidden sm:inline",children:"Modo Cliente \uD83C\uDFE0"}),(0,a.jsxs)("button",{onClick:()=>e.push("/role-selector"),className:"flex items-center gap-2 text-emerald-600 font-semibold hover:text-emerald-700 transition",children:[a.jsx(i.Z,{size:16})," Cambiar rol"]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl md:text-4xl font-extrabold text-emerald-600 mb-2",children:["Hola \uD83D\uDC4B ",u?.user_metadata?.full_name?.split(" ")[0]||""]}),a.jsx("p",{className:"text-gray-600 max-w-md text-sm md:text-base leading-relaxed",children:"\xbfQu\xe9 necesit\xe1s hoy? Eleg\xed una opci\xf3n para comenzar."})]}),(0,a.jsxs)("div",{className:"flex flex-col w-full max-w-xs gap-4",children:[a.jsx(m.default,{href:"/map",children:(0,a.jsxs)(n.E.button,{whileTap:{scale:.96},whileHover:{scale:1.05},className:"w-full flex flex-col items-center justify-center gap-1 border border-emerald-400 text-emerald-600 py-3 rounded-xl bg-white hover:bg-emerald-50 shadow-sm font-semibold transition",children:[a.jsx(l.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"\uD83D\uDD52 Urgente — Ver mapa de profesionales"}),a.jsx("p",{className:"text-xs text-gray-500 font-normal",children:"Ideal para servicios inmediatos"})]})}),a.jsx(m.default,{href:"/client/new",children:(0,a.jsxs)(n.E.button,{whileTap:{scale:.96},whileHover:{scale:1.05},className:"w-full flex flex-col items-center justify-center gap-1 bg-gradient-to-r from-emerald-500 to-teal-500 text-white py-3 rounded-xl shadow-md hover:shadow-lg transition",children:[a.jsx(o.Z,{className:"w-5 h-5"}),a.jsx("span",{children:"\uD83D\uDCC5 Program\xe1 tu pedido"}),a.jsx("p",{className:"text-xs text-white/80 font-normal",children:"Perfecto para tareas planificadas"})]})}),a.jsx(m.default,{href:"/client/jobs",children:(0,a.jsxs)(n.E.button,{whileTap:{scale:.96},whileHover:{scale:1.05},className:"w-full flex items-center justify-center gap-2 border border-gray-200 text-gray-700 py-3 rounded-xl bg-white hover:bg-gray-50 shadow-sm font-semibold transition",children:[a.jsx(c,{className:"w-5 h-5"})," Ver mis pedidos"]})}),b?.worker&&(0,a.jsxs)(n.E.button,{whileTap:{scale:.96},whileHover:{scale:1.05},onClick:I,className:"w-full flex items-center justify-center gap-2 bg-gray-100 text-gray-800 py-3 rounded-xl hover:bg-gray-200 font-semibold transition",children:["\uD83D\uDCAC Chat con ",b.worker?.full_name||"trabajador"]})]}),j.length>0&&(0,a.jsxs)("div",{className:"mt-10 w-full max-w-md text-left",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Tus \xfaltimas calificaciones \uD83C\uDF1F"}),a.jsx("div",{className:"space-y-2",children:j.map((e,t)=>(0,a.jsxs)("div",{className:"p-3 bg-white rounded-xl border shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-emerald-600",children:e.worker.full_name}),a.jsx("div",{className:"flex gap-1",children:[...Array(e.rating)].map((e,t)=>a.jsx(d.Z,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},t))})]}),e.comment&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.comment})]},t))})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white text-emerald-600 font-semibold",children:"Cargando Modo Cliente…"})}},3170:(e,t,s)=>{"use strict";s.d(t,{S:()=>n});var a=s(4848);let r=null;function n(){if(r)return r;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("❌ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return r=(0,a.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("✅ Supabase (browser client) inicializado en",e),r}},7546:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},1468:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},3734:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9884:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>r});var a=s(9510);s(7272);let r={title:"ManosYA | Cliente",description:"Panel del cliente de ManosYA"};function n({children:e}){return(0,a.jsxs)("section",{className:"flex flex-col min-h-screen bg-white text-gray-900 overflow-visible",children:[a.jsx("main",{className:"flex-1 flex flex-col relative z-10",children:e}),(0,a.jsxs)("footer",{className:"text-center text-xs text-gray-500 py-4 border-t border-gray-200 bg-gray-50 relative z-10",children:["\xa9 ",new Date().getFullYear()," ",a.jsx("span",{className:"text-emerald-600 font-semibold",children:"ManosYA"})," — Conectamos clientes y profesionales \uD83D\uDCAA"]}),a.jsx("div",{id:"modal-root",className:"fixed inset-0 z-[99999] pointer-events-none"})]})}},1471:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var a=s(8570);let r=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\client\page.jsx`),{__esModule:n,$$typeof:i}=r;r.default;let l=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\client\page.jsx#default`)},2309:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p,metadata:()=>h});var a=s(9510),r=s(7121),n=s.n(r),i=s(4010),l=s.n(i);s(7272);var o=s(1032),c=s(8570);let d=(0,c.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\ClientOnlyLayout.jsx`),{__esModule:m,$$typeof:x}=d;d.default;let u=(0,c.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\ClientOnlyLayout.jsx#default`),h={title:"ManosYA | Tu ayuda al instante",description:"Conectamos clientes y profesionales en minutos. R\xe1pido, seguro y confiable.",manifest:"/manifest.json",icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/icons/icon-192x192.png"},themeColor:"#14B8A6"};function p({children:e}){return(0,a.jsxs)("html",{lang:"es",suppressHydrationWarning:!0,className:`${n().variable} ${l().variable} antialiased`,children:[(0,a.jsxs)("head",{children:[a.jsx("meta",{name:"theme-color",content:"#14B8A6"}),a.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),a.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),a.jsx("meta",{name:"apple-mobile-web-app-title",content:"ManosYA"}),a.jsx("meta",{name:"application-name",content:"ManosYA"}),a.jsx("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),a.jsx("link",{rel:"apple-touch-icon",href:"/icons/icon-512x512.png"}),a.jsx("link",{rel:"manifest",href:"/manifest.json"}),a.jsx("style",{children:"html:not(.hydrated){visibility:hidden}"}),a.jsx("script",{dangerouslySetInnerHTML:{__html:`
              window.addEventListener('DOMContentLoaded', () => {
                document.documentElement.classList.add('hydrated');
              });
            `}})]}),(0,a.jsxs)("body",{className:" min-h-screen flex flex-col bg-[#F9FAFB] text-gray-900 antialiased overflow-x-hidden overflow-y-visible selection:bg-emerald-200 selection:text-emerald-800 ",children:[a.jsx(o.x7,{position:"top-center",richColors:!0}),a.jsx(u,{children:e}),a.jsx("script",{dangerouslySetInnerHTML:{__html:`
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                  navigator.serviceWorker
                    .register('/sw.js')
                    .then(() => console.log('🟢 Service Worker ManosYA activo'))
                    .catch(err => console.error('❌ Error registrando SW:', err));
                });
              }
            `}})]})]})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,606,163],()=>s(8505));module.exports=a})();