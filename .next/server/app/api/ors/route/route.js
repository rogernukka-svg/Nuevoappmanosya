"use strict";(()=>{var e={};e.id=722,e.ids=[722],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2253:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>O,staticGenerationAsyncStorage:()=>R});var o={};t.r(o),t.d(o,{GET:()=>p,POST:()=>l});var s=t(9303),n=t(8716),a=t(670),i=t(7070);let u="https://api.openrouteservice.org/v2/directions/driving-car";async function p(e){try{let{searchParams:r}=new URL(e.url),t=r.get("start"),o=r.get("end"),s=process.env.NEXT_PUBLIC_ORS_API_KEY;if(!t||!o)return i.NextResponse.json({error:"Faltan par\xe1metros obligatorios: 'start' y/o 'end'."},{status:400});if(!s)return i.NextResponse.json({error:"Falta la variable NEXT_PUBLIC_ORS_API_KEY en .env.local"},{status:500});let n=`${u}?api_key=${s}&start=${t}&end=${o}`,a=await fetch(n,{headers:{Accept:"application/json"},cache:"no-store"});if(!a.ok){let e=await a.text();return console.error("❌ Error ORS (GET):",a.status,e),i.NextResponse.json({error:"Error en OpenRouteService (GET)",details:e},{status:a.status})}let p=await a.json();if(!p?.features?.length)return i.NextResponse.json({error:"Respuesta inv\xe1lida o sin datos de ruta"},{status:422});return new i.NextResponse(JSON.stringify(p),{status:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Cache-Control":"no-store"}})}catch(e){return console.error("❌ Error interno en /api/ors/route (GET):",e),i.NextResponse.json({error:"Error interno del servidor",details:e.message},{status:500})}}async function l(e){try{let r=await e.json(),t=process.env.NEXT_PUBLIC_ORS_API_KEY;if(!r?.coordinates||!Array.isArray(r.coordinates))return i.NextResponse.json({error:"Debe incluir un array v\xe1lido de 'coordinates'."},{status:400});if(!t)return i.NextResponse.json({error:"Falta la variable NEXT_PUBLIC_ORS_API_KEY en .env.local"},{status:500});let o=await fetch(u,{method:"POST",headers:{Authorization:t,"Content-Type":"application/json"},body:JSON.stringify({coordinates:r.coordinates,instructions:!1}),cache:"no-store"});if(!o.ok){let e=await o.text();return console.error("❌ Error ORS (POST):",o.status,e),i.NextResponse.json({error:"Error en OpenRouteService (POST)",details:e},{status:o.status})}let s=await o.json();if(!s?.features?.length)return i.NextResponse.json({error:"Respuesta inv\xe1lida o sin coordenadas"},{status:422});return new i.NextResponse(JSON.stringify(s),{status:200,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Cache-Control":"no-store"}})}catch(e){return console.error("❌ Error interno en /api/ors/route (POST):",e),i.NextResponse.json({error:"Error interno del servidor",details:e.message},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ors/route/route",pathname:"/api/ors/route",filename:"route",bundlePath:"app/api/ors/route/route"},resolvedPagePath:"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\api\\ors\\route\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:R,serverHooks:O}=c,v="/api/ors/route/route";function h(){return(0,a.patchFetch)({serverHooks:O,staticGenerationAsyncStorage:R})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(2253));module.exports=o})();