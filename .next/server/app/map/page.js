(()=>{var e={};e.id=883,e.ids=[883],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1996:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),a(328),a(8304),a(2309),a(5866);var s=a(3191),r=a(8716),n=a(7922),l=a.n(n),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let c=["",{children:["map",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,328)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\map\\page.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8304)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\map\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,2309)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\map\\page.jsx"],u="/map/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/map/page",pathname:"/map",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4357:(e,t,a)=>{Promise.resolve().then(a.bind(a,6053)),Promise.resolve().then(a.bind(a,5999))},4703:(e,t,a)=>{Promise.resolve().then(a.bind(a,4804))},3448:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},5303:()=>{},6053:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var s=a(326),r=a(7577),n=a(5047),l=a(434),i=a(5999),o=a(3170);function c(){(0,n.usePathname)();let[e,t]=(0,r.useState)("");return e?s.jsx("div",{className:"mt-1 text-emerald-600/80 text-xs font-medium animate-fadeIn",children:e}):null}function d({children:e}){(0,n.useRouter)();let t=(0,n.usePathname)(),[a,d]=(0,r.useState)(!1);if((0,o.S)(),!a)return null;let u=t?.startsWith("/worker"),m=t?.startsWith("/client"),x=t?.startsWith("/admin"),p=t?.startsWith("/login")||t?.startsWith("/register")||t?.startsWith("/role-selector");return(0,s.jsxs)("div",{suppressHydrationWarning:!0,className:" bg-white text-gray-900 min-h-screen flex flex-col antialiased selection:bg-emerald-100 selection:text-emerald-700 overflow-x-hidden overflow-y-visible relative ",children:[(0,s.jsxs)("div",{className:"pointer-events-none fixed inset-0 -z-10",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white via-gray-50 to-gray-100"}),s.jsx("div",{className:"absolute inset-0 opacity-40 bg-[radial-gradient(ellipse_at_30%_20%,rgba(20,184,166,0.08),transparent_70%)]"}),s.jsx("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(ellipse_at_70%_40%,rgba(59,130,246,0.05),transparent_70%)]"})]}),!p&&(0,s.jsxs)("header",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-200 bg-white/90 backdrop-blur-sm shadow-sm",children:[(0,s.jsxs)(l.default,{href:u?"/worker/onboard":m?"/client":x?"/admin":"/",className:"text-[1.4rem] font-extrabold tracking-tight hover:opacity-90 transition-opacity",children:[s.jsx("span",{className:"text-gray-900",children:"Manos"}),s.jsx("span",{className:"text-emerald-600",children:"YA"})]}),u&&s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Trabajador \uD83E\uDDD1â€\uD83D\uDD27"}),m&&s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Cliente \uD83C\uDFE1"}),x&&s.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Modo Admin \uD83E\uDDE0"}),!u&&!m&&!x&&s.jsx("span",{className:"text-xs text-gray-500 tracking-wide",children:"v1.0 Beta"})]}),s.jsx("main",{className:"flex-1 relative z-10 animate-fadeIn",children:e}),!t?.startsWith("/client")&&!t?.startsWith("/worker")&&(0,s.jsxs)("footer",{className:"bg-gray-50 text-center py-4 border-t border-gray-200 text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," ",s.jsx("span",{className:"text-emerald-600 font-semibold",children:"ManosYA"})," \xb7 Alto Paran\xe1 \uD83C\uDDF5\uD83C\uDDFE",s.jsx(c,{}),s.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Tu ayuda al instante âš¡"})]}),s.jsx(i.Toaster,{position:"bottom-center",richColors:!0,toastOptions:{style:{background:"#fff",color:"#1f2937",border:"1px solid rgba(0,0,0,0.05)",boxShadow:"0 4px 16px rgba(0,0,0,0.08)"}}})]})}function u(){let[e,t]=(0,r.useState)(null),[a,n]=(0,r.useState)(!1),l=async()=>{if(!e)return;e.prompt();let{outcome:a}=await e.userChoice;console.log("Resultado instalaci\xf3n:",a),t(null),n(!1)};return a?s.jsx("button",{onClick:l,className:"fixed bottom-20 right-4 bg-[var(--accent)] text-black font-bold px-4 py-2 rounded-xl shadow-lg",children:"\uD83D\uDCF2 Instalar App"}):null}function m({children:e}){let t=(0,n.usePathname)(),[a,l]=(0,r.useState)(!1);if(!a)return null;let i=t.startsWith("/worker")||t.startsWith("/business");return"/login"===t||"/register"===t||"/role-selector"===t||"/registro"===t?(0,s.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-white text-gray-900",children:[e,s.jsx(u,{})]}):i?(0,s.jsxs)(s.Fragment,{children:[e,s.jsx(u,{})]}):(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-[#F9FAFB] text-gray-900",children:[s.jsx(d,{children:e}),s.jsx(u,{})]})}},4804:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var s=a(326),r=a(7577),n=a(3265);a(6998);var l=a(5047),i=a(5795),o=a(9086),c=a(3734),d=a(2881);let u=(0,d.Z)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var m=a(7048);let x=(0,d.Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),p=(0,d.Z)("hammer",[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]]),h=(0,d.Z)("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),f=(0,d.Z)("paw-print",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]),g=(0,d.Z)("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),b=(0,d.Z)("navigation-2",[["polygon",{points:"12 2 19 21 12 17 5 21 12 2",key:"x8c0qg"}]]);var y=a(1890);let j=(0,d.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),v=(0,d.Z)("clock-3",[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),w=(0,d.Z)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var N=a(6307),k=a(939),S=a(3170),A=a(5999);let C=(0,r.createContext)(null);C.Provider;let E=(0,S.S)(),O=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet"]},ssr:!1}),_=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet"]},ssr:!1}),R=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet"]},ssr:!1}),M=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet"]},ssr:!1}),z=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet"]},ssr:!1}),D=(0,n.default)(async()=>{},{loadableGenerated:{modules:["app\\map\\page.jsx -> react-leaflet-cluster"]},ssr:!1});function P({center:e}){return function(){let e=(0,r.useContext)(C);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}().map,null}function I({avg:e=0,count:t=0}){let a=Math.floor(e),r=e-a>=.5;return(0,s.jsxs)("div",{className:"flex justify-center items-center gap-0.5 mt-1",children:[Array.from({length:a}).map((e,t)=>s.jsx(c.Z,{size:14,className:"text-yellow-400 fill-yellow-400"},`f${t}`)),r&&s.jsx(c.Z,{size:14,className:"text-yellow-400"}),Array.from({length:5-a-(r?1:0)}).map((e,t)=>s.jsx(c.Z,{size:14,className:"text-gray-300"},`e${t}`)),(0,s.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",t,")"]})]})}let L=e=>(e||"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");function Y(){let e=(0,l.useRouter)(),[t,a]=(0,r.useState)([-25.516,-54.616]),[n,c]=(0,r.useState)({id:null,lat:null,lon:null}),[d,S]=(0,r.useState)([]),[C,Y]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(null),[q,$]=(0,r.useState)(!1),[F,G]=(0,r.useState)(null),[B,W]=(0,r.useState)([]),[J,H]=(0,r.useState)(new Set),[V,X]=(0,r.useState)(null),U=(0,r.useRef)(null),Q=(0,r.useRef)(null),K=[{id:"plomer\xeda",label:"Plomer\xeda",icon:s.jsx(u,{size:18})},{id:"electricidad",label:"Electricidad",icon:s.jsx(m.Z,{size:18})},{id:"limpieza",label:"Limpieza",icon:s.jsx(x,{size:18})},{id:"construcci\xf3n",label:"Construcci\xf3n",icon:s.jsx(p,{size:18})},{id:"jardiner\xeda",label:"Jardiner\xeda",icon:s.jsx(h,{size:18})},{id:"mascotas",label:"Mascotas",icon:s.jsx(f,{size:18})},{id:"emergencia",label:"Emergencia",icon:s.jsx(g,{size:18})}];async function ee(){Y(!0);try{let{data:e,error:t}=await E.from("map_workers_view").select("*").not("lat","is",null).not("lng","is",null);if(t)throw t;let a=e;if(V){let e=L(V);a=a.filter(t=>(t.skills||[]).some(t=>L(t).includes(e)))}S(a)}catch(e){A.A.error("Error cargando trabajadores: "+e.message)}finally{Y(!1)}}async function et(e){if(!n.id)return A.A.warning("Inici\xe1 sesi\xf3n");if(!J.has(e.user_id))try{H(t=>new Set([...t,e.user_id]));let{error:t}=await E.from("jobs").insert([{status:"open",title:`Trabajo de ${e.skills?.[0]||"servicio"}`,worker_id:e.user_id,client_id:n.id,client_lat:n.lat,client_lng:n.lon,created_at:new Date().toISOString()}]).select().single();if(t)throw t;A.A.success(`ðŸš€ Solicitud enviada a ${e.full_name||"el trabajador"}`)}catch(e){A.A.error("Error al solicitar: "+e.message)}}async function ea(e){if(!n.id)return A.A.warning("Inici\xe1 sesi\xf3n");try{let{data:t}=await E.from("chats").select("id").eq("client_id",n.id).eq("worker_id",e.user_id).maybeSingle(),a=t?.id;if(!a){let{data:t}=await E.from("chats").insert([{client_id:n.id,worker_id:e.user_id}]).select("id").single();a=t.id}G(a),$(!0);let{data:s}=await E.from("messages").select("*").eq("chat_id",a).order("created_at",{ascending:!0});W(s||[]),Q.current&&E.removeChannel(Q.current);let r=E.channel(`chat-${a}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`chat_id=eq.${a}`},e=>W(t=>[...t,e.new])).subscribe();Q.current=r}catch{A.A.error("No se pudo abrir el chat")}}async function es(e){let t=e.trim();t&&F&&await E.from("messages").insert([{chat_id:F,sender_id:n.id,content:t}])}return(0,s.jsxs)(i.E.div,{className:"container max-w-screen-md mx-auto px-4 pb-20 bg-white text-gray-900 min-h-screen",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 pt-6",children:[s.jsx("button",{onClick:()=>e.push("/client"),className:"text-emerald-600 font-semibold flex items-center gap-1",children:"â† Atr\xe1s"}),s.jsx("h1",{className:"text-lg font-bold text-emerald-600",children:"Mapa de servicios"}),s.jsx("div",{className:"w-8"})]}),(0,s.jsxs)("section",{className:"p-5 bg-white border rounded-2xl shadow-sm text-center",children:[s.jsx("h2",{className:"font-extrabold text-2xl mb-3",children:"âš¡ \xbfQu\xe9 necesit\xe1s hoy?"}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:K.map(e=>(0,s.jsxs)(i.E.button,{whileTap:{scale:.95},onClick:()=>X(e.id===V?null:e.id),className:`flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all border ${V===e.id?"bg-emerald-500 text-white border-emerald-500 shadow-sm":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}`,children:[e.icon,e.label]},e.id))}),s.jsx(i.E.button,{whileTap:{scale:.97},onClick:ee,className:"mt-2 w-full py-3 text-lg font-semibold rounded-xl bg-emerald-500 text-white shadow hover:bg-emerald-600",children:C?"Buscandoâ€¦":"\uD83C\uDF0D Mostrar en mapa"})]}),(0,s.jsxs)("div",{className:"mt-5 rounded-2xl overflow-hidden border shadow bg-gray-50 relative",style:{height:"65vh"},children:[(0,s.jsxs)(O,{center:t,zoom:13,style:{height:"100%",width:"100%"},children:[s.jsx(P,{center:t}),s.jsx(_,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),n.lat&&n.lon&&s.jsx(M,{center:[n.lat,n.lon],radius:60,pathOptions:{color:"#10b981",fillOpacity:.15},children:s.jsx(z,{children:"\uD83D\uDCCD Mi ubicaci\xf3n"})}),s.jsx(D,{chunkedLoading:!0,maxClusterRadius:48,iconCreateFunction:function(e){return null},children:d.map(e=>s.jsx(R,{position:[e.lat,e.lng],icon:(e.avatar_url,null),eventHandlers:{click:()=>Z(e)}},e.user_id))})]}),s.jsx("button",{onClick:function(){n.lat&&n.lon&&a([n.lat,n.lon])},className:"absolute bottom-5 right-5 bg-white p-3 rounded-full shadow border hover:bg-gray-50",children:s.jsx(b,{className:"text-emerald-600",size:22})})]}),s.jsx(o.M,{children:T&&s.jsx(i.E.div,{className:"fixed inset-0 bg-black/40 flex items-end justify-center z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(i.E.div,{className:"bg-white rounded-t-3xl w-full max-w-md shadow-2xl text-center overflow-y-auto max-h-[88vh]",initial:{y:50},animate:{y:0},exit:{y:50},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center px-5 py-4 border-b sticky top-0 bg-white",children:[q?(0,s.jsxs)("button",{onClick:()=>$(!1),className:"flex items-center gap-1 text-gray-600",children:[s.jsx(y.Z,{size:20})," Perfil"]}):s.jsx("div",{className:"w-6"}),s.jsx("div",{className:"font-semibold",children:q?`Chat con ${T.full_name||"Trabajador"}`:"Perfil"}),s.jsx("button",{onClick:()=>Z(null),children:s.jsx(j,{size:22,className:"text-gray-400 hover:text-red-400"})})]}),q?(0,s.jsxs)("div",{className:"flex flex-col h-[70vh]",children:[s.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-2",children:B.map(e=>{let t=e.sender_id===n.id;return s.jsx("div",{className:`flex ${t?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[80%] px-3 py-2 rounded-2xl text-sm shadow-sm ${t?"bg-emerald-500 text-white":"bg-gray-100 text-gray-800"}`,children:e.content})},e.id)})}),(0,s.jsxs)("form",{className:"p-3 border-t flex gap-2",onSubmit:async e=>{e.preventDefault();let t=U.current?.value||"";await es(t),U.current&&(U.current.value="")},children:[s.jsx("input",{ref:U,type:"text",placeholder:"Escrib\xed un mensajeâ€¦",className:"flex-1 bg-gray-100 rounded-xl px-3 py-3 border"}),s.jsx("button",{className:"px-4 bg-emerald-500 text-white rounded-xl",children:s.jsx(k.Z,{size:18})})]})]}):(0,s.jsxs)("div",{className:"px-6 pb-8 pt-4",children:[s.jsx("img",{src:T.avatar_url||"/avatar-fallback.png",alt:T.full_name||"Trabajador",className:"w-24 h-24 rounded-full mx-auto mb-3 border-4 border-emerald-500 object-cover"}),s.jsx("h3",{className:"text-xl font-bold capitalize",children:T.full_name||"Trabajador"}),s.jsx(I,{avg:T.rating_avg||0,count:T.rating_count||0}),(0,s.jsxs)("p",{className:"text-sm italic text-gray-600 mt-2",children:["â€œ",T.bio||"Sin descripci\xf3n.","â€"]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-2 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-700 text-sm",children:[s.jsx(v,{className:"text-emerald-500",size:16}),s.jsx("span",{children:"number"==typeof T.years_experience&&T.years_experience>0?`${T.years_experience} a\xf1os de experiencia`:"Sin experiencia especificada"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full text-xs font-semibold",children:[s.jsx(w,{size:14})," Frecuente en tu zona"]}),s.jsx("p",{className:"text-xs text-emerald-600 mt-1",children:function(e,t){if(!e)return"Sin datos";if("working"===t)return"En trabajo";let a=Math.floor((Date.now()-new Date(e).getTime())/6e4);if(a<1)return"Activo hace segundos";if(a<60)return`Activo hace ${a} min`;let s=Math.floor(a/60);if(s<24)return`Activo hace ${s}h`;let r=Math.floor(s/24);return`Activo hace ${r} d\xeda${r>1?"s":""}`}(T.updated_at,T.status)})]}),s.jsx("div",{className:"mt-4 text-left space-y-2",children:(0,s.jsxs)("div",{className:"bg-gray-50 border rounded-xl p-3",children:[s.jsx("p",{className:"text-xs text-gray-500",children:"Especialidades"}),s.jsx("p",{className:"text-sm",children:(T.skills||[]).length?(T.skills||[]).join(", "):"Sin especialidades registradas"})]})}),J.has(T.user_id)?(0,s.jsxs)("div",{className:"mt-5 bg-gray-50 border rounded-xl p-3",children:[s.jsx(N.Z,{className:"text-emerald-500 mx-auto"}),s.jsx("p",{className:"text-emerald-600 font-semibold",children:"Solicitud enviada"})]}):(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-5",children:[s.jsx("button",{onClick:()=>ea(T),className:"py-3 border rounded-xl",children:"\uD83D\uDCAC Chatear"}),s.jsx("button",{onClick:()=>et(T),className:"py-3 rounded-xl bg-emerald-500 text-white font-semibold hover:bg-emerald-600",children:"\uD83D\uDE80 Solicitar"})]})]})]})})})]})}},3170:(e,t,a)=>{"use strict";a.d(t,{S:()=>n});var s=a(4848);let r=null;function n(){if(r)return r;let e="https://ydtficoxjuxsoaxtghhj.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlkdGZpY294anV4c29heHRnaGhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwOTUwNDIsImV4cCI6MjA3NTY3MTA0Mn0.KBRDCAJYvjpmcXRnYFcuSI8Mn0zYfJzaN0QJo63gzy8";if(!e||!t)throw console.error("âŒ Faltan variables de entorno de Supabase."),Error("Variables de entorno Supabase no configuradas.");return r=(0,s.createBrowserClient)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),console.log("âœ… Supabase (browser client) inicializado en",e),r}},1890:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},939:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]])},3734:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},7048:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(2881).Z)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},2309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h,metadata:()=>p});var s=a(9510),r=a(7121),n=a.n(r),l=a(4010),i=a.n(l);a(7272);var o=a(1032),c=a(8570);let d=(0,c.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\ClientOnlyLayout.jsx`),{__esModule:u,$$typeof:m}=d;d.default;let x=(0,c.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\ClientOnlyLayout.jsx#default`),p={title:"ManosYA | Tu ayuda al instante",description:"Conectamos clientes y profesionales en minutos. R\xe1pido, seguro y confiable.",manifest:"/manifest.json",icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/icons/icon-192x192.png"},themeColor:"#14B8A6"};function h({children:e}){return(0,s.jsxs)("html",{lang:"es",suppressHydrationWarning:!0,className:`${n().variable} ${i().variable} antialiased`,children:[(0,s.jsxs)("head",{children:[s.jsx("meta",{name:"theme-color",content:"#14B8A6"}),s.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),s.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),s.jsx("meta",{name:"apple-mobile-web-app-title",content:"ManosYA"}),s.jsx("meta",{name:"application-name",content:"ManosYA"}),s.jsx("link",{rel:"icon",href:"/favicon.ico",sizes:"any"}),s.jsx("link",{rel:"apple-touch-icon",href:"/icons/icon-512x512.png"}),s.jsx("link",{rel:"manifest",href:"/manifest.json"}),s.jsx("style",{children:"html:not(.hydrated){visibility:hidden}"}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              window.addEventListener('DOMContentLoaded', () => {
                document.documentElement.classList.add('hydrated');
              });
            `}})]}),(0,s.jsxs)("body",{className:" min-h-screen flex flex-col bg-[#F9FAFB] text-gray-900 antialiased overflow-x-hidden overflow-y-visible selection:bg-emerald-200 selection:text-emerald-800 ",children:[s.jsx(o.x7,{position:"top-center",richColors:!0}),s.jsx(x,{children:e}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                  navigator.serviceWorker
                    .register('/sw.js')
                    .then(() => console.log('ðŸŸ¢ Service Worker ManosYA activo'))
                    .catch(err => console.error('âŒ Error registrando SW:', err));
                });
              }
            `}})]})]})}},8304:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n,metadata:()=>r});var s=a(9510);let r={title:"Mapa | ManosYA",description:"Ubic\xe1 trabajadores cercanos y solicit\xe1 ayuda al instante."};function n({children:e}){return s.jsx("section",{className:"bg-white text-gray-900 min-h-screen relative overflow-visible",children:e})}},328:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var s=a(8570);let r=(0,s.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\map\page.jsx`),{__esModule:n,$$typeof:l}=r;r.default;let i=(0,s.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\map\page.jsx#default`)},7272:()=>{},9086:(e,t,a)=>{"use strict";a.d(t,{M:()=>y});var s=a(326),r=a(7577),n=a(339),l=a(7977),i=a(2482),o=a(295),c=a(9539),d=a(3965);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class m extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,a=(0,c.R)(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:t,anchorX:a,root:n}){let l=(0,r.useId)(),i=(0,r.useRef)(null),o=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,r.useContext)(d._),x=function(...e){return r.useCallback(function(...e){return t=>{let a=!1,s=e.map(e=>{let s=u(e,t);return a||"function"!=typeof s||(a=!0),s});if(a)return()=>{for(let t=0;t<s.length;t++){let a=s[t];"function"==typeof a?a():u(e[t],null)}}}}(...e),e)}(i,e?.ref);return(0,r.useInsertionEffect)(()=>{let{width:e,height:s,top:r,left:d,right:u}=o.current;if(t||!i.current||!e||!s)return;let m="left"===a?`left: ${d}`:`right: ${u}`;i.current.dataset.motionPopId=l;let x=document.createElement("style");c&&(x.nonce=c);let p=n??document.head;return p.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            ${m}px !important;
            top: ${r}px !important;
          }
        `),()=>{p.contains(x)&&p.removeChild(x)}},[t]),(0,s.jsx)(m,{isPresent:t,childRef:i,sizeRef:o,children:r.cloneElement(e,{ref:x})})}let p=({children:e,initial:t,isPresent:a,onExitComplete:n,custom:i,presenceAffectsLayout:c,mode:d,anchorX:u,root:m})=>{let p=(0,l.h)(h),f=(0,r.useId)(),g=!0,b=(0,r.useMemo)(()=>(g=!1,{id:f,initial:t,isPresent:a,custom:i,onExitComplete:e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),[a,p,n]);return c&&g&&(b={...b}),(0,r.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[a]),r.useEffect(()=>{a||p.size||!n||n()},[a]),"popLayout"===d&&(e=(0,s.jsx)(x,{isPresent:a,anchorX:u,root:m,children:e})),(0,s.jsx)(o.O.Provider,{value:b,children:e})};function h(){return new Map}var f=a(6933);let g=e=>e.key||"";function b(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let y=({children:e,custom:t,initial:a=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:m="left",root:x})=>{let[h,y]=(0,f.oO)(u),j=(0,r.useMemo)(()=>b(e),[e]),v=u&&!h?[]:j.map(g),w=(0,r.useRef)(!0),N=(0,r.useRef)(j),k=(0,l.h)(()=>new Map),[S,A]=(0,r.useState)(j),[C,E]=(0,r.useState)(j);(0,i.L)(()=>{w.current=!1,N.current=j;for(let e=0;e<C.length;e++){let t=g(C[e]);v.includes(t)?k.delete(t):!0!==k.get(t)&&k.set(t,!1)}},[C,v.length,v.join("-")]);let O=[];if(j!==S){let e=[...j];for(let t=0;t<C.length;t++){let a=C[t],s=g(a);v.includes(s)||(e.splice(t,0,a),O.push(a))}return"wait"===d&&O.length&&(e=O),E(b(e)),A(j),null}let{forceRender:_}=(0,r.useContext)(n.p);return(0,s.jsx)(s.Fragment,{children:C.map(e=>{let r=g(e),n=(!u||!!h)&&(j===C||v.includes(r));return(0,s.jsx)(p,{isPresent:n,initial:(!w.current||!!a)&&void 0,custom:t,presenceAffectsLayout:c,mode:d,root:x,onExitComplete:n?void 0:()=>{if(!k.has(r))return;k.set(r,!0);let e=!0;k.forEach(t=>{t||(e=!1)}),e&&(_?.(),E(N.current),u&&y?.(),o&&o())},anchorX:m,children:e},r)})})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,606,163,246],()=>a(1996));module.exports=s})();