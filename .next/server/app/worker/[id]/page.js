(()=>{var e={};e.id=463,e.ids=[463],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4069:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(8017),s(469),s(2309),s(5866);var a=s(3191),r=s(8716),n=s(7922),l=s.n(n),o=s(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);s.d(t,i);let d=["",{children:["worker",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8017)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\[id]\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,469)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2309)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\[id]\\page.jsx"],u="/worker/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/worker/[id]/page",pathname:"/worker/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},403:(e,t,s)=>{Promise.resolve().then(s.bind(s,8885))},8885:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(326),r=s(7577),n=s(5047),l=s(434),o=s(3265);s(6998);var i=s(3170);let d=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app\\worker\\[id]\\page.jsx -> react-leaflet"]},ssr:!1}),c=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app\\worker\\[id]\\page.jsx -> react-leaflet"]},ssr:!1}),u=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app\\worker\\[id]\\page.jsx -> react-leaflet"]},ssr:!1}),p=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app\\worker\\[id]\\page.jsx -> react-leaflet"]},ssr:!1}),x=(0,o.default)(async()=>{},{loadableGenerated:{modules:["app\\worker\\[id]\\page.jsx -> react-leaflet"]},ssr:!1});function m({status:e}){let t={open:{text:"\uD83D\uDCE6 Esperando asignaci\xf3n",cls:"bg-white/10 text-white"},assigned:{text:"\uD83E\uDDED Asignado",cls:"bg-emerald-500 text-black"},on_route:{text:"\uD83D\uDE97 En camino",cls:"bg-cyan-400 text-black"},arrived:{text:"\uD83D\uDCCD Lleg\xf3 al destino",cls:"bg-indigo-400 text-black"},done:{text:"✅ Completado",cls:"bg-emerald-400 text-black"},canceled:{text:"❌ Cancelado",cls:"bg-red-500 text-black"}}[e]||{text:e||"—",cls:"bg-white/10 text-white"};return a.jsx("span",{className:`px-3 py-1.5 rounded-full text-sm font-bold ${t.cls}`,children:t.text})}function f(){let{id:e}=(0,n.useParams)(),[t,s]=(0,r.useState)(null),[o,f]=(0,r.useState)(!0),[b,j]=(0,r.useState)(null),[h,g]=(0,r.useState)(null),[y,O]=(0,r.useState)([]),[v,w]=(0,r.useState)(null),[E,P]=(0,r.useState)(null),_=(0,r.useMemo)(()=>"number"==typeof t?.lat&&"number"==typeof t?.lon,[t]);async function C(){await i.supabase.from("jobs").update({status:"arrived"}).eq("id",e),s(e=>({...e,status:"arrived"}))}async function N(){await i.supabase.from("jobs").update({status:"done"}).eq("id",e),s(e=>({...e,status:"done"}))}async function S(){confirm("\xbfQuer\xe9s cancelar este trabajo?")&&(await i.supabase.from("jobs").update({status:"canceled"}).eq("id",e),s(e=>({...e,status:"canceled"})))}return o?a.jsx("div",{className:"container",children:a.jsx("div",{className:"card p-5 mt-6 text-center text-white/70",children:"⏳ Cargando pedido…"})}):b?a.jsx("div",{className:"container",children:(0,a.jsxs)("div",{className:"card p-5 mt-6 text-center text-red-400",children:["⚠️ Error: ",b]})}):t?(0,a.jsxs)("div",{className:"container py-6",children:[(0,a.jsxs)("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-extrabold mb-2",children:t.title||"Trabajo"}),a.jsx(m,{status:t.status}),(0,a.jsxs)("p",{className:"mt-2 text-white/70 text-sm",children:["Publicado: ",new Date(t.created_at).toLocaleString()]})]}),_&&(0,a.jsxs)("section",{className:"card p-4 mb-6",children:[a.jsx("h2",{className:"font-bold mb-3 text-lg text-center",children:"\uD83D\uDCCD Ubicaci\xf3n del cliente"}),a.jsx("div",{className:"w-full rounded-2xl overflow-hidden",style:{height:320},children:(0,a.jsxs)(d,{center:[t.lat,t.lon],zoom:14,style:{height:"100%",width:"100%"},children:[a.jsx(c,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),a.jsx(u,{position:[t.lat,t.lon],children:a.jsx(p,{children:"Cliente"})}),h&&a.jsx(u,{position:[h.lat,h.lon],children:a.jsx(p,{children:"Vos (trabajador)"})}),y.length>0&&a.jsx(x,{positions:y,pathOptions:{color:"#14B8A6",weight:5}})]})}),v&&E&&(0,a.jsxs)("p",{className:"mt-3 text-center text-sm text-white/80",children:["\uD83D\uDE97 Distancia: ",(0,a.jsxs)("strong",{children:[E," km"]})," • ⏱ Tiempo estimado: ",(0,a.jsxs)("strong",{children:[v," min"]})]})]}),(0,a.jsxs)("section",{className:"card p-6 text-center space-y-3",children:[a.jsx("h3",{className:"font-bold text-lg mb-3",children:"Acciones r\xe1pidas"}),"open"===t.status&&a.jsx("button",{className:"btn bg-red-600 text-white py-3 text-lg w-full",onClick:S,children:"❌ Cancelar trabajo"}),"arrived"!==t.status&&"done"!==t.status&&"canceled"!==t.status&&a.jsx("button",{className:"btn bg-cyan-500 text-black py-3 text-lg w-full",onClick:C,children:"✅ Marcar llegada"}),"arrived"===t.status&&a.jsx("button",{className:"btn bg-emerald-500 text-black py-3 text-lg w-full",onClick:N,children:"\uD83C\uDFC1 Finalizar trabajo"}),a.jsx(l.default,{href:"/worker/jobs",className:"btn bg-white/10 text-white py-3 w-full mt-4",children:"← Volver a mis trabajos"})]})]}):a.jsx("div",{className:"container",children:a.jsx("div",{className:"card p-5 mt-6 text-center",children:"Trabajo no encontrado."})})}process.env.NEXT_PUBLIC_ORS_KEY},3265:(e,t,s)=>{"use strict";s.d(t,{default:()=>r.a});var a=s(3353),r=s.n(a)},3353:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=s(1174);s(326),s(7577);let r=a._(s(7028));function n(e,t){var s;let a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let n={...a,...t};return(0,r.default)({...n,modules:null==(s=n.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},933:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=s(4129);function r(e){let{reason:t,children:s}=e;throw new a.BailoutToCSRError(t)}},7028:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=s(326),r=s(7577),n=s(933),l=s(6618);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,r.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.PreloadCss,{moduleIds:t.modules}),(0,a.jsx)(s,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(r.Suspense,{fallback:o,children:i})}return c.displayName="LoadableComponent",c}},6618:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let a=s(326),r=s(5403);function n(e){let{moduleIds:t}=e,s=(0,r.getExpectedRequestStore)("next/dynamic css"),n=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,a.jsx)(a.Fragment,{children:n.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},8017:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var a=s(8570);let r=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\[id]\page.jsx`),{__esModule:n,$$typeof:l}=r;r.default;let o=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\[id]\page.jsx#default`)},6998:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,606,153],()=>s(4069));module.exports=a})();