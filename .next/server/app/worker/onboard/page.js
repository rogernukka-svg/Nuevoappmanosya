(()=>{var e={};e.id=152,e.ids=[152],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},4766:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(4037),r(469),r(2309),r(5866);var t=r(3191),s=r(8716),l=r(7922),o=r.n(l),n=r(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(a,i);let d=["",{children:["worker",{children:["onboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4037)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\onboard\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,469)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2309)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\onboard\\page.jsx"],u="/worker/onboard/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/worker/onboard/page",pathname:"/worker/onboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},178:(e,a,r)=>{Promise.resolve().then(r.bind(r,2631))},2631:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(326);r(4047);var s=r(7577);let l=(0,r(3170).S)(),o=[{slug:"limpieza",name:"\uD83E\uDDF9 Limpieza"},{slug:"plomeria",name:"\uD83D\uDD27 Plomer\xeda"},{slug:"jardineria",name:"\uD83C\uDF3F Jardiner\xeda / C\xe9sped"},{slug:"electricidad",name:"⚡ Electricidad"},{slug:"auxilio-vehicular",name:"\uD83D\uDE97 Auxilio vehicular"},{slug:"fletes",name:"\uD83D\uDE9A Fletes y mudanzas"}],n=[3,5,10,15,20],i=[{value:"CI",label:"C\xe9dula de Identidad (CI)"},{value:"DNI",label:"Documento Nacional de Identidad (DNI)"},{value:"PASSPORT",label:"Pasaporte"}];function d(){let[e,a]=(0,s.useState)(null);return(0,t.jsxs)("div",{className:"container py-6",children:[(0,t.jsxs)("header",{className:"mb-8 text-center",children:[t.jsx("h1",{className:"font-heading text-3xl font-extrabold bg-gradient-to-r from-emerald-500 to-cyan-500 text-transparent bg-clip-text",children:"Activar Perfil Profesional"}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm mt-2 max-w-xl mx-auto",children:["Sub\xed tu foto, eleg\xed tus oficios, defin\xed tu radio de trabajo, carg\xe1 tus documentos, complet\xe1 tus datos bancarios y empez\xe1 a recibir pedidos con ",t.jsx("b",{children:"ManosYA"}),"."]})]}),t.jsx(c,{user:e})]})}function c({user:e}){let[a,r]=(0,s.useState)(!0),[d,c]=(0,s.useState)(""),[u,m]=(0,s.useState)(null),[x,p]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[f,h]=(0,s.useState)(!0),[j,v]=(0,s.useState)([]),[y,N]=(0,s.useState)(5),[w,_]=(0,s.useState)(null),[C,S]=(0,s.useState)(""),[D,k]=(0,s.useState)(""),[O,P]=(0,s.useState)("CI"),[A,E]=(0,s.useState)(""),[R,I]=(0,s.useState)(null),[L,T]=(0,s.useState)(null),[q,Y]=(0,s.useState)(null),[G,$]=(0,s.useState)(""),[B,F]=(0,s.useState)("ahorro"),[z,U]=(0,s.useState)(""),[M,V]=(0,s.useState)(""),[J,H]=(0,s.useState)(""),[X,K]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(null),[Z,ee]=(0,s.useState)(null),ea=(0,s.useMemo)(()=>d&&y>0,[d,y]);async function er(a){let r=a.target.files?.[0];if(r&&e?.id)try{let a=`${e.id}/avatar_${Date.now()}.jpg`,{error:t}=await l.storage.from("avatars").upload(a,r,{cacheControl:"3600",upsert:!0});if(t)throw t;let{data:s}=l.storage.from("avatars").getPublicUrl(a),o=s.publicUrl;await l.from("profiles").update({avatar_url:o}).eq("id",e.id),m(o),W("\uD83D\uDDBC️ Foto de perfil actualizada.")}catch(e){ee("No se pudo subir la foto: "+e.message)}}async function et(){try{let a=await new Promise((e,a)=>navigator.geolocation.getCurrentPosition(a=>e({lat:a.coords.latitude,lon:a.coords.longitude}),a,{enableHighAccuracy:!0}));_(a),await l.from("worker_profiles").upsert({user_id:e.id,last_lat:a.lat,last_lon:a.lon},{onConflict:"user_id"}),W("\uD83D\uDCCD Ubicaci\xf3n guardada.")}catch(e){ee("No se pudo obtener ubicaci\xf3n: "+e.message)}}async function es(a,r){if(r&&e?.id)try{let t=r.name.split(".").pop(),s=`${e.id}/${a}_${Date.now()}.${t}`,{error:o}=await l.storage.from("worker-docs").upload(s,r);if(o)throw o;let{data:n}=l.storage.from("worker-docs").getPublicUrl(s),i=n.publicUrl,d="front"===a?{front_url:i}:{back_url:i};await l.from("documents").upsert({user_id:e.id,doc_type:O,doc_number:A,...d},{onConflict:"user_id,doc_type"}),"front"===a?I(i):T(i),W("\uD83D\uDCC4 Documento subido.")}catch(e){ee("No se pudo subir el documento: "+e.message)}}async function el(a){if(a&&e?.id)try{let r=a.name.split(".").pop(),t=`${e.id}/police_${Date.now()}.${r}`,{error:s}=await l.storage.from("worker-docs").upload(t,a);if(s)throw s;let{data:o}=l.storage.from("worker-docs").getPublicUrl(t),n=o.publicUrl;await l.from("documents").upsert({user_id:e.id,doc_type:"POLICE",file_url:n},{onConflict:"user_id,doc_type"}),Y(n),W("\uD83D\uDEE1️ Antecedente policial subido.")}catch(e){ee("No se pudo subir el antecedente policial: "+e.message)}}async function eo(a){if(a?.preventDefault?.(),e?.id){K(!0),W(null),ee(null);try{await l.from("profiles").update({full_name:d}).eq("id",e.id),await l.from("worker_profiles").upsert({user_id:e.id,is_active:f,radius_km:y,bio:C,years_experience:Number(D)||null,last_lat:w?.lat??null,last_lon:w?.lon??null,skills:j},{onConflict:"user_id"}),A&&await l.from("documents").upsert({user_id:e.id,doc_type:O,doc_number:A,front_url:R,back_url:L},{onConflict:"user_id,doc_type"}),await l.from("bank_accounts").upsert({user_id:e.id,bank_name:G||null,account_type:B||null,account_number:z||null,holder_name:M||null,holder_document:J||null},{onConflict:"user_id"}),W("✅ Perfil guardado y activado correctamente.")}catch(e){ee("❌ "+(e.message||e))}finally{K(!1)}}}return a?t.jsx("div",{className:"text-center py-10 text-gray-500",children:"Cargando perfil profesional..."}):(0,t.jsxs)("form",{onSubmit:eo,className:"space-y-8 max-w-2xl mx-auto bg-[#f9fafb] py-6 px-3 rounded-2xl",children:[(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Tu perfil"}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("img",{src:u||"/avatar-fallback.png",alt:"avatar",className:"w-24 h-24 rounded-full border-4 border-emerald-500 object-cover"}),(0,t.jsxs)("label",{className:"text-sm text-emerald-600 cursor-pointer font-medium",children:["Cambiar foto",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:er})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Nombre y apellido"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500 outline-none",value:d,onChange:e=>c(e.target.value),placeholder:"Ej: Juan P\xe9rez"})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[x&&t.jsx("span",{className:"bg-emerald-600/15 text-emerald-700 px-3 py-1 rounded-full text-xs font-semibold",children:"✓ Perfil verificado"}),b&&(0,t.jsxs)("span",{className:"bg-yellow-400/15 text-yellow-700 px-3 py-1 rounded-full text-xs font-semibold",children:["⭐ ",b,"/5"]})]})]}),(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Tus oficios"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(e=>{let a=j.includes(e.slug);return t.jsx("button",{type:"button",onClick:()=>v(a?j.filter(a=>a!==e.slug):[...j,e.slug]),className:`px-3 py-2 rounded-lg border text-sm font-medium transition ${a?"bg-emerald-500 text-white border-emerald-500":"border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:e.name},e.slug)})}),(0,t.jsxs)("div",{className:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Radio de trabajo"}),t.jsx("select",{value:y,onChange:e=>N(Number(e.target.value)),className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",children:n.map(e=>(0,t.jsxs)("option",{value:e,children:[e," km"]},e))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Estado"}),(0,t.jsxs)("select",{value:f?"activo":"inactivo",onChange:e=>h("activo"===e.target.value),className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",children:[t.jsx("option",{value:"activo",children:"✅ Disponible"}),t.jsx("option",{value:"inactivo",children:"⏸️ Pausado"})]})]})]})]}),(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Tu ubicaci\xf3n"}),t.jsx("button",{type:"button",onClick:et,className:"text-sm font-semibold text-emerald-600 hover:text-emerald-700",children:"Guardar ubicaci\xf3n actual"}),w&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["\uD83D\uDCCD Lat: ",w.lat?.toFixed(4)," \xb7 Lon: ",w.lon?.toFixed(4)]})]}),(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Sobre vos"}),t.jsx("textarea",{rows:3,className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:C,onChange:e=>S(e.target.value),placeholder:"Contanos un poco sobre tu experiencia..."}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"A\xf1os de experiencia"}),t.jsx("input",{type:"number",min:0,className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:D,onChange:e=>k(e.target.value)})]})]}),(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Verificaci\xf3n de identidad"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Tipo de documento"}),t.jsx("select",{value:O,onChange:e=>P(e.target.value),className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",children:i.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"N\xfamero"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:A,onChange:e=>E(e.target.value),placeholder:"Ej: 12345678"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Frente"}),(0,t.jsxs)("label",{className:"text-sm text-emerald-600 cursor-pointer font-medium",children:["Subir frente",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>es("front",e.target.files?.[0])})]}),R&&t.jsx("a",{href:R,target:"_blank",className:"block text-emerald-600 text-xs underline mt-1",children:"Ver archivo"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Dorso"}),(0,t.jsxs)("label",{className:"text-sm text-emerald-600 cursor-pointer font-medium",children:["Subir dorso",t.jsx("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>es("back",e.target.files?.[0])})]}),L&&t.jsx("a",{href:L,target:"_blank",className:"block text-emerald-600 text-xs underline mt-1",children:"Ver archivo"})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Antecedente policial (PDF/JPG/PNG)"}),(0,t.jsxs)("label",{className:"text-sm text-emerald-600 cursor-pointer font-medium",children:["Subir archivo",t.jsx("input",{type:"file",hidden:!0,accept:"application/pdf,image/*",onChange:e=>el(e.target.files?.[0])})]}),q&&t.jsx("a",{href:q,target:"_blank",className:"block text-emerald-600 text-xs underline mt-1",children:"Ver archivo"})]})]}),(0,t.jsxs)("section",{className:"bg-white border border-gray-200 shadow-sm rounded-xl p-6",children:[t.jsx("h2",{className:"font-semibold text-gray-700 border-l-4 border-emerald-500 pl-3 mb-4",children:"Datos bancarios (para cobros)"}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Banco"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:G,onChange:e=>$(e.target.value),placeholder:"Ej: Ita\xfa, Visi\xf3n, BBVA..."})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Tipo de cuenta"}),(0,t.jsxs)("select",{value:B,onChange:e=>F(e.target.value),className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",children:[t.jsx("option",{value:"ahorro",children:"Caja de ahorro"}),t.jsx("option",{value:"corriente",children:"Cuenta corriente"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"N\xfamero / Alias"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:z,onChange:e=>U(e.target.value),placeholder:"N\xfamero de cuenta o alias"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Titular de la cuenta"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:M,onChange:e=>V(e.target.value),placeholder:"Nombre y apellido"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"text-sm font-semibold text-gray-700 mb-1 block",children:"Documento del titular"}),t.jsx("input",{className:"w-full border rounded-lg p-2 bg-gray-50 focus:ring-2 focus:ring-emerald-500",value:J,onChange:e=>H(e.target.value),placeholder:"CI / DNI / Pasaporte del titular"})]})]})]}),Q&&t.jsx("div",{className:"text-emerald-600 text-sm",children:Q}),Z&&t.jsx("div",{className:"text-red-500 text-sm",children:Z}),t.jsx("button",{type:"submit",className:"w-full py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold rounded-xl shadow transition",disabled:!ea||X,children:X?"Guardando...":"✅ Guardar y activar perfil"})]})}},4037:(e,a,r)=>{"use strict";r.r(a),r.d(a,{$$typeof:()=>o,__esModule:()=>l,default:()=>n});var t=r(8570);let s=(0,t.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\onboard\page.jsx`),{__esModule:l,$$typeof:o}=s;s.default;let n=(0,t.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\onboard\page.jsx#default`)},4047:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),t=a.X(0,[948,606,153],()=>r(4766));module.exports=t})();