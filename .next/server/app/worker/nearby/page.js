(()=>{var e={};e.id=418,e.ids=[418],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},7578:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>m,tree:()=>c}),r(2134),r(469),r(2309),r(5866);var a=r(3191),s=r(8716),n=r(7922),i=r.n(n),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["worker",{children:["nearby",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2134)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\nearby\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,469)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2309)),"D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["D:\\CARPETA ROGER\\CONESTESOYBILLONARIOYALOSOY\\jobs-mvp-next-pro-main\\app\\worker\\nearby\\page.jsx"],d="/worker/nearby/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/worker/nearby/page",pathname:"/worker/nearby",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2619:(e,t,r)=>{Promise.resolve().then(r.bind(r,9898))},9898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(326),s=r(7577),n=r(3170);let i=[{slug:"limpieza",name:"Limpieza"},{slug:"plomeria",name:"Plomer\xeda"},{slug:"jardineria",name:"Jardiner\xeda / C\xe9sped"},{slug:"electricidad",name:"Electricidad"},{slug:"auxilio-vehicular",name:"Auxilio vehicular"},{slug:"fletes",name:"Fletes"}],o=[3,5,10,15,20];function l(){let[e,t]=(0,s.useState)(null),[r,l]=(0,s.useState)(i[0].slug),[c,u]=(0,s.useState)(5),[d,p]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),[b,g]=(0,s.useState)(null),[h,j]=(0,s.useState)(null);async function O(){if(!navigator.geolocation){j("Tu navegador no soporta geolocalizaci\xf3n");return}navigator.geolocation.getCurrentPosition(async e=>{let r={lon:e.coords.longitude,lat:e.coords.latitude};t(r),await n.supabase.rpc("set_my_worker_location",r)},e=>j(e.message),{enableHighAccuracy:!0})}async function v(){if(!e)return j("Primero actualiz\xe1 tu ubicaci\xf3n");p(!0),j(null);let{data:t,error:a}=await n.supabase.rpc("fn_find_nearby_jobs",{lon:e.lon,lat:e.lat,skill_slug:r,max_km:c});p(!1),a?j(a.message):(x(t||[]),g(`${(t||[]).length} trabajo(s) encontrados`))}async function y(e){let{error:t}=await n.supabase.rpc("take_job",{job_id:e});if(t)return alert(t.message);alert('✅ Tomaste el trabajo. Revis\xe1 en "Mis trabajos".'),v()}return(0,a.jsxs)("div",{className:"container",children:[a.jsx("header",{className:"mt-6 mb-4 flex items-end justify-between",children:a.jsx("h1",{className:"text-2xl font-extrabold",children:"Trabajos cerca"})}),(0,a.jsxs)("section",{className:"card p-4 mb-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[a.jsx("select",{value:r,onChange:e=>l(e.target.value),className:"select",children:i.map(e=>a.jsx("option",{value:e.slug,children:e.name},e.slug))}),a.jsx("select",{value:c,onChange:e=>u(Number(e.target.value)),className:"select",children:o.map(e=>(0,a.jsxs)("option",{value:e,children:[e," km"]},e))}),a.jsx("button",{onClick:O,className:"btn btn-ghost",children:"Actualizar ubicaci\xf3n"}),a.jsx("button",{onClick:v,disabled:d,className:"btn btn-primary",children:d?"Buscando…":"Buscar trabajos"})]}),e&&(0,a.jsxs)("div",{className:"text-xs text-white/60 mt-2",children:["Ubicaci\xf3n: ",e.lat.toFixed(4),", ",e.lon.toFixed(4)]})]}),h&&a.jsx("div",{className:"text-red-400",children:h}),b&&a.jsx("div",{className:"text-white/60",children:b}),a.jsx("div",{className:"space-y-3",children:m.map(e=>(0,a.jsxs)("article",{className:"card p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold",children:e.title}),a.jsx("p",{className:"text-sm opacity-70",children:e.description})]}),a.jsx("button",{onClick:()=>y(e.id),className:"btn btn-primary",children:"Tomar"})]},e.id))})]})}},2134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});var a=r(8570);let s=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\nearby\page.jsx`),{__esModule:n,$$typeof:i}=s;s.default;let o=(0,a.createProxy)(String.raw`D:\CARPETA ROGER\CONESTESOYBILLONARIOYALOSOY\jobs-mvp-next-pro-main\app\worker\nearby\page.jsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,606,153],()=>r(7578));module.exports=a})();